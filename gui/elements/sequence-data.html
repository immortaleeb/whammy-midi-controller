<link rel="import"
      href="../../bower_components/polymer/polymer.html">

<dom-module id="sequence-data">
  <script>
    (function() {
      'use strict';

      const ipcRenderer = require('electron').ipcRenderer,
            WhammyModes = require('../src/WhammyModes');

      Polymer({
        is: "sequence-data",

        ready() {
          ipcRenderer.on('activeStep', (event, index) => {
            console.log('active step changed', this.activeStep);
            this.activeStep = index;
          });
        },

        properties: {
          sequence: {
            notify: true,
            value: [
              {
                "mode": WhammyModes.SHALLOW
              },
              {
                "mode": WhammyModes.DIVE_BOMB
              }
            ]
          },
          activeStep: {
            value: 0,
            notify: true
          }
        },
        observers: ['_sequenceChanged(sequence.*)'],

        _sequenceChanged(changeRecord) {
          ipcRenderer.send('sequence', 'setSequence', changeRecord.base);
        }
      });
    }());
  </script>
</dom-module>
